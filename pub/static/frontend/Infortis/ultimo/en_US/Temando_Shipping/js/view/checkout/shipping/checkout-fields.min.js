define(['underscore','uiComponent','ko','temandoCheckoutFieldsDefinition','Magento_Checkout/js/model/quote','temandoDeliveryOptions','Temando_Shipping/js/action/save-service-selection'],function(_,Component,ko,fieldsDefinition,quote,deliveryOptions,saveServiceSelection){'use strict';return Component.extend({defaults:{template:'Temando_Shipping/checkout/shipping/checkout-fields',fields:[]},checkoutFieldsVisible:deliveryOptions.isToAddressSelected,getFields:function(){if(_.isEmpty(this.fields)){_.each(fieldsDefinition.getFields(),function(fieldDefinition){var field={id:fieldDefinition.id,label:fieldDefinition.label,type:fieldDefinition.type,options:fieldDefinition.options,value:ko.observable(fieldDefinition.value)};field.value.subscribe(function(fieldValue){fieldsDefinition.updateFieldValue(fieldDefinition.id,fieldValue);saveServiceSelection(this.fields);},this);this.fields.push(field);},this);}
return this.fields;}});});